function _(a){return document.querySelector(a)}function positionCenter(a){var b=a.width(),c=a.height(),d=window.innerHeight/2-c/2,e=window.innerWidth/2-b/2;a.css({position:"absolute",top:d,left:e})}Pathways.LoadScenes=function(){var a=window.innerHeight<550?560:window.innerHeight+10,b=$(".sequence"),c=new ScrollMagic,d=new Array,e=0;if(_(".start")){var f=TweenMax.to(_(".start .content"),1,{opacity:0,y:a/3});d[e++]=new ScrollScene({triggerElement:".start",duration:600,offset:a/4}).setTween(f)}if(_(".falling-lady")){var g=TweenMax.to(_(".falling-lady"),5,{y:2.2*a});d[e++]=new ScrollScene({triggerElement:".start",duration:3*a,offset:a/4}).setTween(g)}if($(".mute").hide(),$(".mute").on("click",function(){var a=$(this),b=a.parents(".panel").find("video").first().get(0);a.hasClass("active")?(b.volume=1,a.removeClass("active")):(b.volume=0,a.addClass("active"))}),_(".sequence")&&(d[e++]=new ScrollScene({triggerElement:b,triggerHook:"top",duration:b.height()-a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&(b.find(".bg-container").css({position:"fixed",display:"none",opacity:0}),b.find(".panel").first().addClass("active"),b.find(".panel").first().find(".bg-container").css({display:"block",opacity:1})),"REVERSE"==a.scrollDirection&&(b.find(".bg-container").css({position:"fixed"}),b.find(".panel").last().addClass("active"))}).on("leave",function(){b.find(".bg-container").css({position:"absolute",display:"block"})})),$('[data-component="gallery"]').hide(),$('[data-component="quiz"]').hide(),$(".sequence .panel").each(function(){var b=$(this),c=b.height(),f=b.find(".bg-container"),g=b.find(".library-panel"),h=b.find('[data-component="gallery"]'),i=b.find('[data-component="quiz"]'),j=b.find(".mute"),k=TweenMax.to(f,1,{opacity:1});d[e++]=new ScrollScene({triggerElement:b,duration:a/4}).on("enter",function(){f.css("display","block")}).setTween(k),h.length&&(d[e++]=new ScrollScene({triggerElement:b,triggerHook:"top",duration:c-200,offset:50}).on("enter",function(){h.css({position:"fixed",display:"block"}),setTimeout(function(){h.addClass("active")},50)}).on("leave",function(){h.css({position:"absolute",display:"none"}),setTimeout(function(){h.removeClass("active")},50)})),i.length&&(d[e++]=new ScrollScene({triggerElement:b,triggerHook:"top",duration:a}).on("enter",function(){i.css({position:"fixed",display:"block"}),setTimeout(function(){i.addClass("active")},50)}).on("leave",function(){i.css({position:"absolute",display:"none"}),setTimeout(function(){i.removeClass("active")},50)})),g.length&&(g.css("transform","translate("+g.outerWidth()+"px, "+(g.outerHeight()-60)+"px)"),d[e++]=new ScrollScene({triggerElement:b,duration:c-200,offset:100}).on("enter",function(){g.css({position:"fixed",display:"block"})}).on("leave",function(){g.css({position:"absolute",display:"none"})})),j.length&&(d[e++]=new ScrollScene({triggerElement:b,duration:c-200,offset:100}).on("enter",function(){j.css({position:"fixed",display:"block"})}).on("leave",function(){j.css({position:"absolute",display:"none"})}))}),_("#mesmers-salon")&&($(".crop-zoom").css("height",$("#mesmers-salon .bg-container img").height()),window.addEventListener("resize",function(){$(".crop-zoom").css("height",$("#mesmers-salon .bg-container img").height())}),d[e++]=new ScrollScene({triggerElement:"#mesmers-salon",duration:a-100,offset:100}).on("enter",function(){_(".crop-zoom").style.position="fixed",TweenMax.to(".crop-zoom",.2,{opacity:1})}).on("leave",function(){TweenMax.to(".crop-zoom",.2,{opacity:0}),setTimeout(function(){_(".crop-zoom").style.position="absolute"},200)})),_("#magnetised-trees")){var h=$("#magnetised-trees").data("offset-height")?$("#magnetised-trees").data("offset-height"):0;$(".black-strip").css({height:a,transform:"translate(0,"+a+"px)"}),d[e++]=new ScrollScene({triggerElement:"#magnetised-trees",duration:a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&TweenMax.to(".black-strip",.4,{y:0})}).on("leave",function(b){"REVERSE"==b.scrollDirection&&TweenMax.to(".black-strip",.2,{y:a})}),d[e++]=new ScrollScene({triggerElement:"#magnetised-trees",duration:a+h+100}).on("enter",function(){_("#magnetised-trees video")&&_("#magnetised-trees video").play()}).on("leave",function(){_("#magnetised-trees video")&&(_("#magnetised-trees video").pause(),_("#magnetised-trees video").currentTime=0)})}if(_("#satirised")){var i=$("#satirised").data("offset-height")?$("#satirised").data("offset-height"):0;d[e++]=new ScrollScene({triggerElement:"#satirised",duration:a+i+100}).on("enter",function(){_("#satirised video")&&_("#satirised video").play()}).on("leave",function(){_("#satirised video")&&(_("#satirised video").pause(),_("#satirised video").currentTime=0)})}if(_("#committee-investigates")&&(d[e++]=new ScrollScene({triggerElement:"#committee-investigates",duration:a+100}).on("enter",function(){_("#committee-investigates video")&&_("#committee-investigates video").play()}).on("leave",function(){_("#committee-investigates video")&&(_("#committee-investigates video").pause(),_("#committee-investigates video").currentTime=0)})),_("#airloom")&&(d[e++]=new ScrollScene({triggerElement:"#airloom",duration:a}).on("enter",function(){_("#airloom video")&&(_("#airloom video").currentTime=.4),_("#airloom video").play()}).on("leave",function(){_("#airloom video")&&(_("#airloom video").pause(),_("#airloom video").currentTime=0)})),_("#okey-sisters")&&($("#okey-sisters .scroll-content").css({bottom:"auto",top:a}),$("#thomas-wakley .scroll-content").css({bottom:"auto",top:a/3}),$(".black-strip").css({height:a,transform:"translate(0,"+a+"px)"}),d[e++]=new ScrollScene({triggerElement:"#okey-sisters",triggerHook:"top",duration:a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&TweenMax.to(".black-strip",.5,{y:0})}).on("leave",function(b){"REVERSE"==b.scrollDirection&&TweenMax.to(".black-strip",.2,{y:a})})),_("#india")){var j=$("#india .boats"),k=322/1900,l=k*window.innerWidth;j.css({bottom:0,height:l}),$(window).on("resize",function(){l=k*window.innerWidth,j.css({height:l})}),d[e++]=new ScrollScene({triggerElement:"#india",duration:a}).on("enter",function(){j.css("transform","translate(320px,0)")})}if(_("#surgery-under-hypnosis")&&(d[e++]=new ScrollScene({triggerElement:"#surgery-under-hypnosis",duration:a+100}).on("enter",function(){_("#surgery-under-hypnosis video")&&_("#surgery-under-hypnosis video").play()}).on("leave",function(){_("#surgery-under-hypnosis video")&&(_("#surgery-under-hypnosis video").pause(),_("#surgery-under-hypnosis video").currentTime=0)})),_("#self-hypnosis")&&(d[e++]=new ScrollScene({triggerElement:"#self-hypnosis",duration:a+100}).on("enter",function(){_("#self-hypnosis video")&&_("#self-hypnosis video").play()}).on("leave",function(){_("#self-hypnosis video")&&(_("#self-hypnosis video").pause(),_("#self-hypnosis video").currentTime=0)})),_(".trilby")&&($(".comic-panel").css("opacity",0),$(".comic-panel").each(function(){var a=$(this),b=TweenMax.to(a,1,{opacity:1}),c=a.data("offset")?a.data("offset"):0;d[e++]=new ScrollScene({triggerElement:a,duration:200,offset:c}).setTween(b)}),$(".comic-quote").on("click",".info-box",function(){var a=$(this),b=a.parent();b.hasClass("active")?b.removeClass("active"):b.addClass("active")})),_(".anna-o")){var m=[{x:-57,y:-107},{x:79,y:32},{x:178,y:178},{x:-144,y:106}],n=0;$(".anna-o .fragmented").each(function(){var a=$(this),b=m[n].x;y=m[n].y,a.css({transform:"translate("+b+"px, "+y+"px)"}),n++}),$(".anna-o .fragmented").each(function(){var a=TweenMax.to($(this),1,{x:0,y:-3});d[e++]=new ScrollScene({triggerElement:".anna-o",triggerHook:"top",duration:$(".anna-o").height()-420,offset:50}).setTween(a)})}_("#anna-o-video")&&(d[e++]=new ScrollScene({triggerElement:"#anna-o-video",duration:a+100}).on("enter",function(){_("#anna-o-video video")&&_("#anna-o-video video").play()}).on("leave",function(){_("#anna-o-video video")&&(_("#anna-o-video video").pause(),_("#anna-o-video video").currentTime=0)})),_(".office")&&($(".black-strip").css({height:a,transform:"translate(0,"+a+"px)"}),d[e++]=new ScrollScene({triggerElement:".office",duration:a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&TweenMax.to(".black-strip",.5,{y:0})}).on("leave",function(b){"REVERSE"==b.scrollDirection&&TweenMax.to(".black-strip",.2,{y:a})})),_(".office-2")&&(d[e++]=new ScrollScene({triggerElement:".office-2"}).on("enter",function(){$(".office-2").addClass("active")})),d.forEach(function(a){a.addTo(c)})}(function(a){"use strict";var b=function(){var b=this,c=a.innerHeight<550?560:a.innerHeight+10,d="ontouchstart"in a||a.DocumentTouch&&document instanceof DocumentTouch,e=function(){d||(h(),a.addEventListener("resize",function(){h()})),a.addEventListener("load",function(){f(),d||(a.Pathways.LoadScenes(),g())})},f=function(){var b=[];$("[data-component]").each(function(){var d=$(this).attr("data-component");if(d){var e=i(d);null!=a.Pathways[e]&&-1==b.indexOf(e)&&(a.Pathways[e](c),b.push(e)),null==a.Pathways[e]&&console.warn("Could not load the necessary component: "+e)}})},g=function(){$(".bg-container.video").each(function(){var a=$(this),b=a.data("src").replace(/\s+/g," ").split(" ");if(b&&b.length){var c=document.createElement("video");b.forEach(function(a){var b=document.createElement("source");b.src=a,c.appendChild(b)}),c.loop=!0,a.html(c)}})},h=function(){c=a.innerHeight<550?560:a.innerHeight+10,$(".start").css("height",c),$(".panel").each(function(){var a=$(this),b=a.find(".bg-container"),e=a.outerHeight(),f=d||!a.data("offset-height")?0:a.data("offset-height");(c>e||f)&&a.css("height",c+f),b.css("height",c)})},i=function(a){return a=a.replace("-"," ").replace("_"," "),a=a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1)}),a.replace(/\W/g,"")};return e(),b};a.Pathways=b})(window);