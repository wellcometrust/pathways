function _(a){return document.querySelector(a)}function positionCenter(a){var b=a.width(),c=a.height(),d=window.innerHeight/2-c/2,e=window.innerWidth/2-b/2;a.css({position:"absolute",top:d,left:e})}function Carousel(a){function b(){var b=a.find("ul"),c=0;k=[],l=[];for(var d=0;d<j.length;d++){var f=window.innerHeight,o=m[d]*window.innerHeight;j[d].style.width=o+"px",k.push(o),l.push(f),c+=o}i.width(c),q=window.innerWidth/2,n=parseInt(c/j.length),b.css("height",window.innerHeight),i.css("height",window.innerHeight),g.height(window.innerHeight),h.height(window.innerHeight),e.showPane(p,!1)}function c(a,b){i.removeClass("animate"),b&&i.addClass("animate"),i.css("transform","translate3d("+a+"px,0,0)")}function d(a){switch(a.gesture.preventDefault(),a.type){case"dragright":case"dragleft":for(var b=0,d=0;p>d;d++)b-=k[d];b+=q-k[p]/2;var f=100/440*a.gesture.deltaX/o;(0==p&&"right"==a.gesture.direction||p==o-1&&"left"==a.gesture.direction)&&(f*=.4),c(a.gesture.deltaX+b);break;case"swipeleft":e.next(),a.gesture.stopDetect();break;case"swiperight":e.prev(),a.gesture.stopDetect();break;case"release":Math.abs(a.gesture.deltaX)>n/10*3?"right"==a.gesture.direction?e.prev():e.next():e.showPane(p,!0)}}var e=this,f=document.querySelector(a),a=$(a),g=null,h=null,i=null,j=null,k=[],l=[],m=[],n=0,o=0,p=0,q=window.innerWidth/2;this.init=function(){r(function(){i=$(">ul",a),j=$(">ul>li",a),o=j.length,s(),$(f).find("ul").css("transform","translate("+(q-k[0]/2)+"px,0)"),b(),j.css("opacity",.4),j.first().css("opacity",1)}),$(window).on("load resize orientationchange",function(){b()})};var r=function(a){var b=document.createElement("ul"),c=imageDB.images.length,d=0;b.style.height=window.innerHeight+"px",imageDB.images.forEach(function(e){var g=document.createElement("li"),h=new Image;if(h.src="/_assets/img/"+imageDB.location+e.image+".jpg",h.style.height="100%",g.style.height="100%",g.appendChild(h),e.text){var i=document.createElement("span"),j=document.createTextNode(e.text);i.classList.add("text"),i.appendChild(j),g.appendChild(i)}b.appendChild(g),h.onload=function(){if(d++,console.log(d,c),d==c){for(var e=f.querySelectorAll("li"),g=0,h=0;h<e.length;h++){var i=parseInt(window.getComputedStyle(e[h]).width),j=parseInt(window.getComputedStyle(e[h]).height);k.push(i),l.push(j),m.push(i/j),e[h].style.width=i+"px",g+=i}b.style.width=g+"px",console.log(g),a.call()}}}),f.appendChild(b),i=$(b)},s=function(){g=$("<div/>"),h=$("<div/>"),g.addClass("prev disabled"),h.addClass("next"),g.css({left:0,height:window.innerHeight+"px"}),h.css({right:0,height:window.innerHeight+"px"}),a.append(g),a.append(h),new Hammer(g[0]).on("tap",function(){e.prev()}),new Hammer(h[0]).on("tap",function(){e.next()})};this.showPane=function(a,b){var d=0;a=Math.max(0,Math.min(a,o-1)),p=a;for(var e=0;a>e;e++)d-=k[e];d+=q-k[a]/2,j.css("opacity",.4),j.get(p).style.opacity=1,c(d,b),a>0?g.removeClass("disabled"):g.addClass("disabled"),a>=o-1?h.addClass("disabled"):h.removeClass("disabled")},this.next=function(){return this.showPane(p+1,!0)},this.prev=function(){return this.showPane(p-1,!0)},new Hammer(a[0],{drag_lock_to_axis:!0}).on("release dragleft dragright swipeleft swiperight",d)}function Quiz(a){var b,c=$(a),d=!1,e=1,f=quiz_db.questions,g=(quiz_db.questions[e].answers,f.length),h=0,i=5,j=5,k=c.find(".remaining"),l=c.find(".score span"),m=$("<div/>").addClass("timer").css("display","none");this.init=function(){var a=this;console.log("init"),c.on("click",".quiz-start .button",function(){a.start()})},this.start=function(){console.log("starting");var a=this;c.find(".quiz-start").hide(),c.find(".status-bar").show(),c.find(".quiz-playground").show(),c.append(m),this.loadLevel(),c.on("click","li",function(b){d||a.validate(b)})},this.getCurrentQuestion=function(){return f[e-1]},this.loadLevel=function(){var a=this,b=this.getCurrentQuestion(),d=$("<img/>").attr("src",b.image),e="<ul>";c.find(".image").html(d),c.find(".question").html(b.title);for(var f=0;f<b.answers.length;f++)e+="<li>"+b.answers[f]+"</li>";e+="</ul>",c.find(".answers").html(e),this.updateScore(),this.updateQuestionsRemaining(),setTimeout(function(){a.startTimer()},1e3*i)},this.validate=function(a){var b=this,e=this.getCurrentQuestion(),f=!1;this.stopTimer(),c.find("li").index($(a.currentTarget))==e.correct-1&&(f=!0),f?(d=!0,this.showCorrect($(a.currentTarget)),h++,this.updateScore()):this.showError($(a.currentTarget)),setTimeout(function(){d=!1,b.stopTimer(),b.nextQuestion($(a.currentTarget))},2e3)},this.nextQuestion=function(){e++,e<=f.length?this.loadLevel():this.finishGame()},this.showCorrect=function(a){a.addClass("correct")},this.showError=function(a){a.addClass("wrong")},this.revealAnswers=function(){var a=this,b=this.getCurrentQuestion(),d=1;c.find(".answers li").each(function(){d==b.correct?a.showCorrect($(this)):a.showError($(this)),d++})},this.updateScore=function(){l.html(h)},this.updateQuestionsRemaining=function(){k.html("<em>"+e+"</em> of <span>"+g+"</span>")},this.startTimer=function(){var a=this,e=j;clearInterval(b);var f=c.find(".quiz-playground .image"),g=c.find(".quiz-playground .image").offset().top-c.find(".quiz-playground").offset().top;m.css({top:g+f.outerHeight()/2-m.height()/2,left:f.outerWidth()/2-m.width()/2}).html(e),m.fadeIn(100),b=setInterval(function(){e>1?m.html(--e):(m.html('<span style="color:red">'+--e+"</span>"),d=!0,a.stopTimer(),a.revealAnswers(),setTimeout(function(){d=!1,m.fadeOut(100),a.nextQuestion()},2e3))},1e3)},this.stopTimer=function(){clearInterval(b),m.fadeOut(100)},this.finishGame=function(){var a=this,b=c.find(".quiz-finish");this.stopTimer(),m.css("display","none"),b.find(".quiz-finish--score").html("<span>"+h+"</span> out of "+g),c.find(".quiz-playground").hide(),b.show(),b.on("click",".play-again",function(){a.restart()})},this.restart=function(){h=0,e=1,this.start()},this.init()}!function(a){"use strict";var b=function(){var b=this,c=(a.innerWidth>a.innerHeight?"landscape":"portrait",a.innerHeight<550?560:a.innerHeight+10),d="ontouchstart"in a||a.DocumentTouch&&document instanceof DocumentTouch,e=function(){(!d||a.innerWidth>1e3)&&(j(),a.addEventListener("resize",function(){j()})),a.addEventListener("resize",function(){i()}),a.addEventListener("load",function(){d||a.Pathways.LoadScenes(),a.innerWidth>720&&g(),i(),f(),h()})},f=function(){for(var a=document.querySelectorAll("[data-config]"),b=a.length,c=0;b>c;c++){var d=a[c].getAttribute("data-config"),e=JSON.parse(d);console.log(e)}},g=function(){var b=[];$("[data-component]").each(function(){var d=$(this).attr("data-component");if(d){var e=k(d);null!=a.Pathways[e]&&-1==b.indexOf(e)&&(a.Pathways[e](c),b.push(e)),null==a.Pathways[e]&&console.warn("Could not load the necessary component: "+e)}})},h=function(){$(".bg-container.video").each(function(){var a=$(this),b=a.data("src").replace(/\s+/g," ").split(" ");if((!d||a.hasClass("content"))&&b&&b.length){var c=document.createElement("video");b.forEach(function(a){var b=document.createElement("source");b.src=a,c.appendChild(b)}),c.loop=!0,d&&(c.controls=!0,c.preload="none"),a.html(c)}})},i=function(){d||$(".preserve-ratio").each(function(){var a=$(this),b=a.find("img").first(),d=b.outerHeight();b.css("transform","translate(0, "+(c-d)/2+"px)")})},j=function(){c=a.innerHeight<550?560:a.innerHeight+10,$(".start").css("height",c),$(".panel").each(function(){var a=$(this),b=a.find(".bg-container"),e=a.outerHeight(),f=d||!a.data("offset-height")?0:a.data("offset-height");(c>e||f)&&a.css("height",c+f),b.css("height",c)})},k=function(a){return a=a.replace(/-/g," ").replace(/_/g," "),a=a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1)}),a.replace(/\W/g,"")};return e(),b};b.Utils=function(){return{toTitleCase:function(a){return a=a.replace(/-/g," ").replace(/_/g," "),a=a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1)}),a.replace(/\W/g,"")}}}(),b.Scene={},b.Scenes=[],a.Pathways=b}(window),function(a){var b=a(".global-navigation"),c=b.find(".handle"),d="open",e=b.outerHeight(),f=c.outerHeight();b.on("click",".handle",function(){e=b.outerHeight(),"open"==d?(b.css("transform","translate(0, "+-(e-f)+"px)"),d="closed"):(b.css("transform","translate(0, 0)"),d="open")}),window.addEventListener("resize",function(){e=b.outerHeight(),b.css("transform","translate(0, "+-(e-f)+"px)")}),setTimeout(function(){c.trigger("click")},1e3)}($),$(".comic-quote").on("click",".info-box",function(){var a=$(this),b=a.parent();b.hasClass("active")?b.removeClass("active"):b.addClass("active")}),$(".library-panel").on("click",'[rel="external"]',function(a){var b=$(this);window.open(b.attr("href")),a.preventDefault()}),Pathways.LoadScenes=function(){function a(){j=window.pageYOffset,j>c||j>0&&i.css({opacity:1-k*j,transform:Modernizr.csstransforms3d?"translate3d(0,"+j/2+"px,0)":"translate(0,"+j/2+"px)"})}function b(){m=window.pageYOffset,m>c||m>0&&l.css({transform:Modernizr.csstransforms3d?"translate3d(0,"+j/3+"px,0)":"translate(0,"+j/3+"px)"})}var c=window.innerHeight<550?560:window.innerHeight+10,d=$(".sequence"),e=new ScrollMagic;$(".black-strip").css({position:"fixed",height:c,transform:"translate(0,"+c+"px)"}),window.addEventListener("resize",function(){$(".black-strip").css({height:window.innerHeight<550?560:window.innerHeight+10})});var f=new Array,g=0;if(_(".start")){var h=$(".start"),i=h.find(".content").first(),j=0,k=1/(c/2);window.addEventListener("scroll",a,!1)}if(_(".falling-lady")){var l=$(".falling-lady").first(),m=0;window.addEventListener("scroll",b,!1)}if($(".mute").hide(),$(".mute").on("click",function(){var a=$(this),b=a.parents(".panel").find("video").first().get(0);a.hasClass("active")?(b.volume=1,a.removeClass("active")):(b.volume=0,a.addClass("active"))}),_(".sequence")){{var n=d.find(".bg-container"),o=d.find(".panel").first();d.find(".panel").last()}f[g++]=new ScrollScene({triggerElement:d,triggerHook:"top",duration:d.height()-c}).on("enter",function(a){"FORWARD"==a.scrollDirection&&(n.css({position:"fixed",display:"none",opacity:0}),o.find(".bg-container").css({display:"block",opacity:1})),"REVERSE"==a.scrollDirection&&n.css({position:"fixed"})}).on("leave",function(){d.find(".bg-container").css({position:"absolute",display:"block"})})}$('[data-component="gallery"]').hide(),$('[data-component="quiz"]').hide(),$(".sequence .panel").each(function(){var a=$(this),b=a.height(),d=a.find(".bg-container"),e=$('[data-panel="'+a.attr("id")+'"]').first(),h=a.find('[data-component="gallery"]'),i=a.find('[data-component="quiz"]'),j=a.find(".mute"),k=TweenMax.to(d,1,{opacity:1});f[g++]=new ScrollScene({triggerElement:a,duration:c/4}).on("enter",function(){d.css("display","block")}).setTween(k),h.length&&(f[g++]=new ScrollScene({triggerElement:a,triggerHook:"top",duration:b-200,offset:50}).on("enter",function(){h.css({position:"fixed",display:"block"}),setTimeout(function(){h.addClass("active")},50)}).on("leave",function(){h.css({position:"absolute",display:"none"}),setTimeout(function(){h.removeClass("active")},50)})),i.length&&(f[g++]=new ScrollScene({triggerElement:a,triggerHook:"top",duration:c}).on("enter",function(){i.css({position:"fixed",display:"block"}),setTimeout(function(){i.addClass("active")},50)}).on("leave",function(){i.css({position:"absolute",display:"none"}),setTimeout(function(){i.removeClass("active")},50)})),e.length&&(e.css("transform","translate("+e.outerWidth()+"px, "+(e.outerHeight()-60)+"px)"),f[g++]=new ScrollScene({triggerElement:a,duration:b-200,offset:100}).on("enter",function(){e.css({position:"fixed",display:"block"})}).on("leave",function(){e.css({position:"absolute",display:"none"})})),j.length&&(f[g++]=new ScrollScene({triggerElement:a,duration:b-200,offset:100}).on("enter",function(){j.css({position:"fixed",display:"block"})}).on("leave",function(){j.css({position:"absolute",display:"none"})}))}),$("[data-scene]").each(function(){var a=$(this).attr("data-scene");if(a){var b=Pathways.Utils.toTitleCase(a);null!=window.Pathways.Scene[b]&&window.Pathways.Scene[b](c),null==window.Pathways.Scene[b]&&console.warn("Could not load the necessary scene: "+b)}}),f.forEach(function(a){a.addTo(e)}),Pathways.Scenes.forEach(function(a){a.addTo(e)})},Pathways.AudioPlayer=function(){var a=this,b=$(".audio-player"),c=b.find(".progressed"),d=b.find(".time-left span"),e=!1,f=b.data("src"),g=new Audio(f);b.on("click",".controls",function(){e?(g.pause(),$(this).removeClass("active"),e=!1):(g.play(),$(this).addClass("active"),e=!0)}),g.addEventListener("timeupdate",function(){var b=parseInt(g.duration-g.currentTime);c.css("width",g.currentTime*(100/g.duration)+"%"),d.html(a.secondsToMinutes(b))}),this.secondsToMinutes=function(a){var b=Math.floor(a/60),c=a%60;return 10>c&&(c="0"+c),b+"."+c}},Pathways.Gallery=function(){$("body").on("click",'[data-component="gallery"]',function(){var a=$('<div class="overlay"></div>'),b=$('<div class="close"></div>');a.css("height",window.innerHeight),$("body").append(a),a.show(),a.css("background-color","rgba(0,0,0,0.8)"),setTimeout(function(){var c=$('<div class="carousel"></div>');a.append(c);var d=new Carousel(".carousel");d.init(),a.append(b)},800),b.on("click",function(){a.css("opacity",0),setTimeout(function(){a.remove()},800)})})},Pathways.CropZoom=function(a){var b=$(".crop-zoom"),c="/_assets/img/mesmer/";b.css({position:"absolute",opacity:Modernizr.touch?1:0,width:window.innerWidth,"z-index":10}),window.addEventListener("resize",function(){b.css({width:window.innerWidth})}),b.find(".tap-target").each(function(){var b=$(this),d=b.data("crop");if(!db[d])return void console.warn("No related info was found for this tap target");var e,f=c+db[d].image,g=db[d].title?db[d].title:"",h=db[d].text?db[d].text:"",i=db[d].position?db[d].position:"",j=new Image;j.src=f,e=""!=g?"<h2>"+g+"</h2>":"",e+="<p>"+h+"</p>",Hammer(b.get(0)).on("tap",function(b){b.gesture.preventDefault();var c=$('<div class="overlay"></div>'),d=$('<div class="popup"></div>'),f=$(j).addClass("image-crop"),g=$('<div class="text"></div>'),h=$('<div class="close"></div>');g.html(e),d.append(f),d.append(g),c.append(d),c.append(h),$("body").append(c),c.css("height",window.outerHeight),c.css("background-color","rgba(0,0,0,0.9)"),f.get(0).addEventListener("transitionend",function(){g.css({top:window.innerHeight-g.outerHeight()-15}),"right"==i?g.css("right",40):g.css("left",40),g.addClass("show")}),f.css({top:0,left:0,transform:"translate(0, "+a/4+"px)",opacity:0}),setTimeout(function(){f.addClass("animate"),f.css({transform:"translate(0, 0)",opacity:1})},50),f.on("click",function(){c.get(0).addEventListener("transitionend",function(){$(this).remove()},!1),c.css("opacity",0)}),h.on("click",function(){console.log("wibble"),c.get(0).addEventListener("transitionend",function(){$(this).remove()},!1),c.css("opacity",0)}),window.addEventListener("resize",function(){c.css("height",window.innerHeight),g.css({top:window.innerHeight-g.outerHeight()-15})})})})},Pathways.LibraryLayer=function(a){var b=$(".library-layer .gap"),c=b.height(),d="closed";b.css({height:0,transition:"height 0.4s ease"}),$(".library-layer .button").html("open"),$(".library-layer").on("click",".bar",function(){return"closed"==d?($(".library-layer .gap").css("height",c),d="open",$("html, body").animate({scrollTop:b.offset().top-100},500)):($(".library-layer .gap").css("height",0),d="closed"),!1}),b.on("click","a",function(b){var c=$(this),d=window.innerWidth-180,e=window.innerHeight-180;if(c.data("embed")){var f='<div class="wellcomePlayer" data-uri="'+c.data("embed")+'" data-assetsequenceindex="0" data-assetindex="0" data-zoom="-0.6441,0,2.2881,1.4411" data-config="/service/playerconfig" style="width:'+d+"px; height:"+e+'px; background-color: #000"></div>',g=$(f),h=$('<div class="overlay"></div>'),i=$('<div class="close"></div>');return $iframe=$("<iframe/>").attr("src",c.attr("href")),$iframe.attr("width",d),$iframe.attr("height",e),h.css("height",a),$("body").append(h),h.show(),h.css("background-color","rgba(0,0,0,0.8)"),setTimeout(function(){positionCenter(g),h.append(g),h.append($('<script id="embedWellcomePlayer" src="http://wellcomelibrary.org/spas/player/build/wellcomeplayer/js/embed.js"></script>')),h.append(i)},800),h.on("click",function(){this.addEventListener("transitionend",function(){$(this).remove()},!1),h.css("opacity",0),window.embedScriptIncluded=!1}),window.addEventListener("resize",function(){d=window.innerWidth-180,e=window.innerHeight-180,h.css("height",window.innerHeight),$iframe.css("width",d),$iframe.css("height",e),g.css("width",d),g.css("height",e)}),b.preventDefault(),!1}})},Pathways.LibraryPanel=function(){$(".library-panel").on("click",".handle",function(){var a=$(this).parent();a.hasClass("active")?(a.css("transform","translate("+a.outerWidth()+"px, "+(a.outerHeight()-60)+"px)"),a.removeClass("active")):(a.css("transform","translate(38px, 38px)"),a.addClass("active"))})},Pathways.Quiz=function(){$("body").on("click",'[data-component="quiz"]',function(){var a=$('<div class="overlay"></div>'),b=$('<div class="close"></div>');a.css("height",window.innerHeight),$("body").append(a),a.show(),a.css("background-color","rgba(0,0,0,0.9)"),setTimeout(function(){var c=$(_("#template-quiz").innerHTML),d=$('<div class="content"></div>'),e=$('<div class="quiz"></div>');d.append(c),e.append(d),a.append(e),positionCenter(e);new Quiz(e);a.append(b)},800),b.on("click",function(){a.css("opacity",0),setTimeout(function(){a.remove()},800)}),$(window).on("resize",function(){a.css("height",window.innerHeight)})})};var quiz_db={title:"The Esdaile Game",questions:[{image:"http://placekitten.com/500/295",title:"Estimate the weight of the tumour",answers:["0.5kg","1kg","2kg","5kg"],correct:1},{image:"http://placekitten.com/600/300",title:"How long did it take to remove?",answers:["5 minutes","30 minutes","2 hours","4 hours"],correct:4}]};Pathways.Scene.MesmersSalon=function(a){var b=new ScrollScene({triggerElement:"#mesmers-salon",duration:a-100,offset:100}).on("enter",function(){_(".crop-zoom").style.position="fixed",TweenMax.to(".crop-zoom",.2,{opacity:1})}).on("leave",function(){TweenMax.to(".crop-zoom",.2,{opacity:0}),setTimeout(function(){_(".crop-zoom").style.position="absolute"},200)});Pathways.Scenes.push(b)},Pathways.Scene.MagnetisedTrees=function(a){function b(){f=document.getElementById("canvas"),images=images||{};var a=new createjs.LoadQueue(!1);a.addEventListener("fileload",c),a.addEventListener("complete",d),a.loadManifest(lib.properties.manifest)}function c(a){"image"==a.item.type&&(images[a.item.id]=a.result)}function d(){h=new lib.tree2,g=new createjs.Stage(f),g.addChild(h),g.update(),createjs.Ticker.setFPS(lib.properties.fps),createjs.Ticker.addEventListener("tick",g)}var e=new ScrollScene({triggerElement:"#magnetised-trees",duration:a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&TweenMax.to("#magnetised-trees .black-strip",.4,{y:0})}).on("leave",function(b){"REVERSE"==b.scrollDirection&&TweenMax.to("#magnetised-trees .black-strip",.2,{y:a})});Pathways.Scenes.push(e);var f,g,h;b()},Pathways.Scene.Satirised=function(a){var b=$("#satirised").data("offset-height")?$("#satirised").data("offset-height"):0,c=new ScrollScene({triggerElement:"#satirised",duration:a+b+100}).on("enter",function(){_("#satirised video")&&_("#satirised video").play()}).on("leave",function(){_("#satirised video")&&(_("#satirised video").pause(),_("#satirised video").currentTime=0)});Pathways.Scenes.push(c)},Pathways.Scene.CommitteeInvestigates=function(a){var b=new ScrollScene({triggerElement:"#committee-investigates",duration:a+100}).on("enter",function(){var a=_("#committee-investigates video");a.play()}).on("leave",function(){var a=_("#committee-investigates video");a.pause(),a.currentTime=0});Pathways.Scenes.push(b)},Pathways.Scene.Airloom=function(a){var b=new ScrollScene({triggerElement:"#airloom",duration:a}).on("enter",function(){_("#airloom video")&&(_("#airloom video").currentTime=.4,_("#airloom video").play())}).on("leave",function(){_("#airloom video")&&(_("#airloom video").pause(),_("#airloom video").currentTime=0)});Pathways.Scenes.push(b)},Pathways.Scene.OkeySisters=function(a){$("#okey-sisters .main-content, #okey-sisters .secondary-content").css({bottom:"auto",top:a}),$("#thomas-wakley .main-content").css({bottom:"auto",top:a/3});var b=new ScrollScene({triggerElement:"#okey-sisters",triggerHook:"top",duration:a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&TweenMax.to(".black-strip",.5,{y:0})}).on("leave",function(b){"REVERSE"==b.scrollDirection&&TweenMax.to(".black-strip",.2,{y:a})});Pathways.Scenes.push(b)},Pathways.Scene.GonadMan=function(){var a=new ScrollScene({triggerElement:"#gonad-man",triggerHook:"top"}).on("enter",function(){$("#gonad-man").addClass("active")});Pathways.Scenes.push(a)},Pathways.Scene.India=function(a){var b=$("#india .boats"),c=322/1900,d=c*window.innerWidth;b.css({bottom:0,height:d}),$(window).on("resize",function(){d=c*window.innerWidth,b.css({height:d})});var e=new ScrollScene({triggerElement:"#india",duration:a}).on("enter",function(){b.css("transform","translate(320px,0)")});Pathways.Scenes.push(e)},Pathways.Scene.SurgeryUnderHypnosis=function(a){var b=new ScrollScene({triggerElement:"#surgery-under-hypnosis",duration:a+100}).on("enter",function(){_("#surgery-under-hypnosis video")&&_("#surgery-under-hypnosis video").play()}).on("leave",function(){_("#surgery-under-hypnosis video")&&(_("#surgery-under-hypnosis video").pause(),_("#surgery-under-hypnosis video").currentTime=0)});Pathways.Scenes.push(b)},Pathways.Scene.SelfHypnosis=function(a){var b=new ScrollScene({triggerElement:"#self-hypnosis",duration:a+100}).on("enter",function(){_("#self-hypnosis video")&&_("#self-hypnosis video").play()}).on("leave",function(){_("#self-hypnosis video")&&(_("#self-hypnosis video").pause(),_("#self-hypnosis video").currentTime=0)});Pathways.Scenes.push(b)},Pathways.Scene.Trilby=function(){$(".comic-panel").css("opacity",0),$(".comic-panel").each(function(){var a=$(this),b=TweenMax.to(a,1,{opacity:1}),c=a.data("offset")?a.data("offset"):0,d=new ScrollScene({triggerElement:a,duration:200,offset:c}).setTween(b);Pathways.Scenes.push(d)})},Pathways.Scene.AnnaO=function(){var a=[{x:-57,y:-107},{x:79,y:32},{x:178,y:178},{x:-144,y:106}],b=0;$("#anna-o .fragmented").each(function(){var c=$(this),d=a[b].x;y=a[b].y,c.css(Modernizr.csstransforms3d?{transform:"translate3d("+d+"px, "+y+"px, 0)"}:{transform:"translate("+d+"px, "+y+"px)"}),b++}),$("#anna-o .fragmented").each(function(){var a=TweenMax.to($(this),1,{x:0,y:-3}),b=new ScrollScene({triggerElement:"#anna-o",triggerHook:"top",duration:$("#anna-o").height()-420,offset:50}).setTween(a);Pathways.Scenes.push(b)})},Pathways.Scene.AnnaOVideo=function(a){var b=new ScrollScene({triggerElement:"#anna-o-video",duration:a+100}).on("enter",function(){_("#anna-o-video video")&&_("#anna-o-video video").play()}).on("leave",function(){_("#anna-o-video video")&&(_("#anna-o-video video").pause(),_("#anna-o-video video").currentTime=0)});Pathways.Scenes.push(b)},Pathways.Scene.Office=function(a){var b=new ScrollScene({triggerElement:"#office",duration:a}).on("enter",function(a){"FORWARD"==a.scrollDirection&&TweenMax.to("#office .black-strip",.5,{y:0})}).on("leave",function(b){"REVERSE"==b.scrollDirection&&TweenMax.to("#office .black-strip",.2,{y:a})});Pathways.Scenes.push(b)},Pathways.Scene.Office2=function(){var a=new ScrollScene({triggerElement:"#office-2"}).on("enter",function(){$("#office-2").addClass("active")});Pathways.Scenes.push(a)};